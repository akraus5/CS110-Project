#import time
import obstacle,spaceship,resup
import pygame

class Controller:
	"""Main clas of game, all actions occure in this class"""

	def __init__(self,scrW,scrH):
		pygame.init()
		#self.screen = screen.Screen()	#later
		self.scrW = scrW
		self.scrH = scrH
		self.gameDisplay = pygame.display.set_mode((scrW,scrH))
		self.background = pygame.Surface(self.gameDisplay.get_size()).convert()
		self.obstacle = obstacle.Obstacle(self.scrW/2,self.scrH/2,self.scrW,self.scrH,'right',5)
		self.spaceship = spaceship.SpaceShip(self.scrW,self.scrH,5)
		self.resup = resup.Resup((self.scrW // 2) , ((self.scrH * 1) // 7))
		self.sprites = pygame.sprite.RenderPlain((self.spaceship,self.obstacle,self.resup))	#setup main menue, as well as other objects
		pygame.display.set_caption('Game')

	def message_to_screen(self,text,color,size,font):
		self.font = pygame.font.SysFont(font,size)
		self.color = color
		self.text = self.font.render(text,True,self.color)
		self.textRect = self.text.get_rect()
		self.textRect.center = (self.scrW/2,self.scrH/2)
		gameDisplay.blit(self.text,self.textRect)
	
		
	def mainloop(self):
		black = (0,0,0)
<<<<<<< HEAD
		red = (255,0,0)
=======

>>>>>>> 286af952bb7dd8662422d6afe9eb8eee72711b5a
		#Start Timer

		pygame.key.set_repeat(1,50)
		GameExit = False
<<<<<<< HEAD
		GameLose = False
		while not GameExit:
			if not GameLose:
				self.background.fill(black)
			
				#check for events/user input
				for event in pygame.event.get():
					if event.type == pygame.QUIT:
						GameExit = True
					if event.type == pygame.KEYDOWN:
						self.spaceship.move(event.key)

				self.obstacle.move()
				self.obstacle.change_dir()

				if pygame.sprite.collide_rect(self.spaceship,self.obstacle):
					self.spaceship.die()
				if pygame.sprite.collide_rect(self.spaceship,self.resup):
					self.spaceship.winLev()

				self.gameDisplay.blit(self.background,(0,0))
				self.sprites.draw(self.gameDisplay)
=======
		while not GameExit:
			self.background.fill(black)

			#check for events/user input
			for event in pygame.event.get():
				if event.type == pygame.QUIT:
					GameExit = True
				if event.type == pygame.KEYDOWN:
					self.spaceship.move(event.key)

			self.obstacle.move()
			self.obstacle.change_dir()

			if pygame.sprite.collide_rect(self.spaceship,self.obstacle):
				self.spaceship.die()
			if pygame.sprite.collide_rect(self.spaceship,self.resup):
				self.spaceship.winLev()

			self.gameDisplay.blit(self.background,(0,0))
			self.sprites.draw(self.gameDisplay)
>>>>>>> 286af952bb7dd8662422d6afe9eb8eee72711b5a

				pygame.display.flip()

<<<<<<< HEAD
				alive,win = self.spaceship.getStatus()

				if not alive:
					GameLose = True
			if GameLose:
				self.message_to_screen('You Lose',red,100,'comicsansms')
				
=======
			alive,win = self.spaceship.getStatus()

			if((not alive) or win):
				GameExit = True
>>>>>>> 286af952bb7dd8662422d6afe9eb8eee72711b5a



def main():
	game = Controller(500,500)
	game.mainloop()
main()
